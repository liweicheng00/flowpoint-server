(function(t){function e(e){for(var o,i,a=e[0],c=e[1],l=e[2],u=0,h=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},s={app:0},r=[];function i(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"7e9147c1"}[t]+".js"}function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=s[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=s[t]=[e,o]}));e.push(n[2]=o);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=i(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=s[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}s[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/templates/dist/",a.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("85ec"),s=n.n(o);s.a},"24a3":function(t,e,n){"use strict";var o=n("fb75"),s=n.n(o);s.a},"2ce1":function(t,e,n){},"2d12":function(t,e,n){},3416:function(t,e,n){},"35ed":function(t,e,n){},3708:function(t,e,n){"use strict";var o=n("35ed"),s=n.n(o);s.a},"4da2":function(t,e,n){"use strict";var o=n("5359"),s=n.n(o);s.a},"4e1e":function(t,e,n){},5359:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v("| "),n("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),n("b-container",{attrs:{fluid:""}},[n("b-form-row",[n("b-col",{attrs:{cols:"8"}},[n("Tool"),n("Main")],1),n("b-col",[n("All"),n("Demo"),n("Style"),n("TextEditor")],1)],1)],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block"},[n("svg",{ref:"svg",staticClass:"Svg",attrs:{id:"block",version:"2",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight,viewBox:t.viewBox,preserveAspectRatio:"xMidYMid slice"},on:{contextmenu:function(t){t.preventDefault()},click:t.clickEvent,dblclick:function(e){return e.target!==e.currentTarget?null:t.dblclickEvent(e)},mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftmousedownEvent(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftmouseupEvent(e)},mousemove:t.mousemoveEvent,mouseleave:t.mouseleaveEvent,wheel:t.wheelEvent}},[n("g",t._l(t.childs,(function(e,o){return n("Preview",{key:o,attrs:{data:e,parent:t.self},on:{dblclick:t.previewdblclickEvent,"mousedown-right":t.previewmousedownEvent,"mouseup-right":t.previewmouseupEvent,mouseenter:t.previewmouseenterEvent,mouseleave:t.previewmouseleaveEvent}})})),1)])])},a=[],c=(n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{class:t.classList,on:{dblclick:t.dblclick,mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.mousedownright(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.mouseupright(e)},mouseenter:t.mouseenter,mouseleave:t.mouseleave}},["block"==t.data.type?n("Block",{attrs:{data:t.data,parent:t.parent}}):"arrow"==t.data.type?n("Arrow",{attrs:{data:t.data}}):t._e()],1)}),l=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("defs",[n("marker",{attrs:{id:"arrow",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto"}},[n("path",{attrs:{d:"M0,0 L0,6 L9,3 z",fill:"#f00"}})])]),n("path",{attrs:{d:t.d,stroke:"#000","stroke-width":"1","marker-end":"url(#arrow)"}})])},p=[],h={props:{data:Object},data:function(){return{startSection:1,endSection:3}},computed:{startPoint:function(){if(console.log("startPoint"),this.data.props.visable){if(this.data.props.arrowstartPreview){var t,e=parseInt(this.data.props.arrowstartPreview.props.styleObject.y)+parseInt(this.data.props.arrowstartPreview.props.styleObject.height)/2;return t=this.data.props.offsetX>parseInt(this.data.props.arrowstartPreview.props.styleObject.x)?parseInt(this.data.props.arrowstartPreview.props.styleObject.x)+parseInt(this.data.props.arrowstartPreview.props.styleObject.width):parseInt(this.data.props.arrowstartPreview.props.styleObject.x),[t,e]}return console.warn("something wrong!"),[0,0]}return[0,0]},endPoint:function(){var t,e;return console.log("endPoint"),this.data.props.visable?this.data.props.arrowendPreview?(t=this.data.props.arrowendPreview.props.styleObject.x,e=parseInt(this.data.props.arrowendPreview.props.styleObject.y)+parseInt(this.data.props.arrowendPreview.props.styleObject.height)/2,[t,e]):(t=this.data.props.offsetX,e=this.data.props.offsetY,[t,e]):[0,0]},d:function(){var t=this.pathCalculate(this.data.props),e="".concat(t.x1,",").concat(t.y1),n="".concat(t.x2,",").concat(t.y2);return"M".concat(e," L").concat(n)}},methods:{setNodePosition:function(t,e,n){switch(n){case 1:return t[0]-e[0]<0?t[1]-e[1]>=0?4:2:1;case 2:return t[1]-e[1]>=0?t[0]-e[0]>=0?1:3:2;case 3:return t[0]-e[0]>=0?t[1]-e[1]>=0?4:2:3;case 4:return t[1]-e[1]<0?t[0]-e[0]>=0?1:3:4}},pathCalculate:function(t){var e;if(!t.visable)return{x1:0,y1:0,x2:0,y2:0};if(e={x1:parseInt(t.arrowstartPreview.props.styleObject.x)+parseInt(t.arrowstartPreview.props.styleObject.width),y1:parseInt(t.arrowstartPreview.props.styleObject.y)+parseInt(t.arrowstartPreview.props.styleObject.height)/2,x2:t.offsetX,y2:t.offsetY},t.arrowendPreview)switch(e.x2=t.arrowendPreview.props.styleObject.x,e.y2=t.arrowendPreview.props.styleObject.y,this.endSection=this.setNodePosition([e.x1,e.y1],[e.x2,e.y2],this.endSection),this.endSection){case 1:e.x2=parseInt(t.arrowendPreview.props.styleObject.x)+parseInt(t.arrowendPreview.props.styleObject.width),e.y2=parseInt(t.arrowendPreview.props.styleObject.y)+parseInt(t.arrowendPreview.props.styleObject.height)/2;break;case 2:e.x2=parseInt(t.arrowendPreview.props.styleObject.x)+parseInt(t.arrowendPreview.props.styleObject.width)/2,e.y2=t.arrowendPreview.props.styleObject.y;break;case 3:e.x2=t.arrowendPreview.props.styleObject.x,e.y2=parseInt(t.arrowendPreview.props.styleObject.y)+parseInt(t.arrowendPreview.props.styleObject.height)/2;break;case 4:e.x2=parseInt(t.arrowendPreview.props.styleObject.x)+parseInt(t.arrowendPreview.props.styleObject.width)/2,e.y2=parseInt(t.arrowendPreview.props.styleObject.y)+parseInt(t.arrowendPreview.props.styleObject.height);break}switch(this.startSection=this.setNodePosition([e.x2,e.y2],[e.x1,e.y1],this.startSection),this.startSection){case 1:e.x1=parseInt(t.arrowstartPreview.props.styleObject.x)+parseInt(t.arrowstartPreview.props.styleObject.width),e.y1=parseInt(t.arrowstartPreview.props.styleObject.y)+parseInt(t.arrowstartPreview.props.styleObject.height)/2;break;case 2:e.x1=parseInt(t.arrowstartPreview.props.styleObject.x)+parseInt(t.arrowstartPreview.props.styleObject.width)/2,e.y1=parseInt(t.arrowstartPreview.props.styleObject.y);break;case 3:e.x1=parseInt(t.arrowstartPreview.props.styleObject.x),e.y1=parseInt(t.arrowstartPreview.props.styleObject.y)+parseInt(t.arrowstartPreview.props.styleObject.height)/2;break;case 4:e.x1=parseInt(t.arrowstartPreview.props.styleObject.x)+parseInt(t.arrowstartPreview.props.styleObject.width)/2,e.y1=parseInt(t.arrowstartPreview.props.styleObject.y)+parseInt(t.arrowstartPreview.props.styleObject.height);break}return e}}},d=h,f=n("2877"),v=Object(f["a"])(d,u,p,!1,null,"4a88a05e",null),w=v.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftmousedownEvent(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftmouseupEvent(e)},mousemove:t.mousemoveEvent,focus:t.onFocus}},[n("rect",t._b({staticClass:"block",class:{focus:t.ifFocus},attrs:{id:t.data.id,x:t.styleObject.x,y:t.styleObject.y},on:{dblclick:function(e){return e.target!==e.currentTarget?null:t.$emit("dblclick",e,t.data)}}},"rect",t.data.props.styleObject,!1)),n("foreignObject",{attrs:{x:t.styleObject.x,y:t.styleObject.y,width:t.data.props.styleObject.width,height:t.data.props.styleObject.height,"pointer-events":"none"}},[n("body",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",{ref:"content",staticClass:"text",domProps:{innerHTML:t._s(t.data.content)}})])])],1)},b=[],g={props:{data:Object,parent:Object},data:function(){return{ifFocus:!1,allowMove:!1,styleDefault:{width:"100",height:"30",stroke:"black",rx:"3",fill:"transparent","stroke-width":"1",x:"0",y:"0"},textDefault:{}}},created:function(){var t=this;this.$bus.$on("TextEditor:change",(function(e,n){t.ifFocus&&t.data.id==n&&t.$store.commit("editContent",{data:t.data,content:e,clientHeight:parseInt(t.$refs.content.clientHeight)>=parseInt(t.styleDefault.height)?t.$refs.content.clientHeight:t.styleDefault.height})}))},watch:{focusingElementId:function(t){t==this.data.id?(this.ifFocus=!0,this.$bus.$emit("Block:focus",this.data.content,this.data.id)):this.ifFocus=!1}},computed:{styleObject:function(){if(this.data.props.mouseclickposition){var t=this.$store.state.ictm,e=this.data.props.mouseclickposition[0]-parseInt(this.styleDefault.width)/t.a/2,n=this.data.props.mouseclickposition[1]-parseInt(this.styleDefault.height)/t.a/2,o=t.a*e+t.c*n+t.e,s=t.b*e+t.d*n+t.f,r=Object.assign(this.styleDefault,{color:"red",x:"".concat(o),y:"".concat(s)});return this.$store.commit("clearInitPosition",{data:this.data,style:r}),r}return this.data.props.styleObject},textObject:function(){return Object.assign(this.textDefault,{})},focusingElementId:function(){return this.$store.state.FocusingElementId}},mounted:function(){},methods:{onFocus:function(){this.$store.commit("changeFocusingElement",this.data.id)},resizeBody:function(){console.log("here")},leftmousedownEvent:function(t){this.startMove(t)},leftmouseupEvent:function(t){this.endMove(t)},mousemoveEvent:function(t){t.preventDefault(),this.allowMove&&this.move(t)},startMove:function(){this.allowMove=!0},move:function(t){if(this.allowMove){var e=this.$store.state.ictm,n=t.offsetX-parseInt(this.styleDefault.width)/e.a/2,o=t.offsetY-parseInt(this.styleDefault.height)/e.a/2,s=e.a*n+e.c*o+e.e,r=e.b*n+e.d*o+e.f;this.$store.commit("setBlockPosition",{data:this.data,position:{x:"".concat(s),y:"".concat(r)}})}},endMove:function(){this.allowMove=!1}},beforeDestroy:function(){this.$bus.$off("TextEditor:change")}},y=g,k=(n("24a3"),Object(f["a"])(y,m,b,!1,null,"7f993cd5",null)),x=k.exports,j={components:{Arrow:w,Block:x},props:{data:Object,parent:Object},mounted:function(){},computed:{classList:function(){var t={Preview:!0};return t[this.data.type]=!0,t}},methods:{mousedownright:function(t){this.$emit("mousedown-right",t,this.data)},mouseupright:function(t){this.$emit("mouseup-right",t,this.data)},mouseenter:function(t){this.$emit("mouseenter",t,this.data)},mouseleave:function(t){this.$emit("mouseleave",t,this.data)},dblclick:function(t){this.$emit("dblclick",t,this.data)}},beforeDestroy:function(){}},P=j,O=(n("90e1"),Object(f["a"])(P,c,l,!1,null,"0e0e1e0e",null)),$=O.exports,E={components:{Preview:$},props:{},data:function(){return{allowZoom:!1,allowPen:!1,dom:{},svg:null,linkStatus:!1,arrowObject:null,arrowDom:null,props:{clientHeight:null,clientWidth:null,viewBox:{"min-x":0,"min-y":0,width:null,height:null,startPoint:[0,0]},arrowstartPreview:null,arrowendPreview:null}}},created:function(){var t=this;this.$nextTick((function(){t.$store.commit("getSVG",t.$refs),t.$store.commit("setCTM")})),this.$bus.$on("tool:back",(function(){t.backtoolclickEvent()})),this.$bus.$on("changeSelf",(function(){console.log("init viewbox"),t.viewBox=[0,0]})),this.$bus.$on("tool:save",(function(){console.log(t.$refs),t.savetoolclickEvent(t.$refs.svg)})),this.$bus.$on("tool:undo",(function(){t.canUndo&&t.undo()})),this.$bus.$on("tool:redo",(function(){t.canRedo&&t.redo()})),window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){var t=document.getElementById("block");this.svg=t,this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth,this.props.viewBox.height=this.props.clientHeight,this.props.viewBox.width=this.props.clientWidth,this.$store.commit("assignBeginingNode")},computed:{viewBox:{get:function(){return this.props.clientHeight?"".concat(this.props.viewBox["min-x"]," ").concat(this.props.viewBox["min-y"]," ").concat(this.props.viewBox.width," ").concat(this.props.viewBox.height):(console.warn("Waring: No viewBox"),"0 0 0 0")},set:function(t){console.log("set viewBox",t),this.props.viewBox["min-x"]=t[0],this.props.viewBox["min-y"]=t[1]}},data:function(){return this.$store.state.alldata},self:function(){return this.$store.state.self},childs:function(){return this.self.childs},parent:function(){return this.self.parent}},watch:{allowZoom:function(t){console.log("change"),t||(console.log(this.svg),this.svg.on(".zoom",null))}},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth,this.props.viewBox.height=this.props.clientHeight,this.props.viewBox.width=this.props.clientWidth},clickEvent:function(t){this.linkStatus&&(this.$store.commit("cancelLink"),this.endLink(t))},dblclickEvent:function(t){this.$store.commit("addElement",{type:"block",props:this.props,event:t,parent:this.self})},leftmousedownEvent:function(t){this.startPen(t)},leftmouseupEvent:function(t){this.endPen(t)},mousemoveEvent:function(t){t.preventDefault(),this.linkStatus?this.Link(t):this.allowPen&&this.pen(t)},mouseleaveEvent:function(){},wheelEvent:function(t){this.zoom(t)},previewmousedownEvent:function(t,e){this.startLink(t,e)},previewmouseupEvent:function(t,e){this.endLink(t,e)},previewdblclickEvent:function(t,e){console.log("send changeSelf"),this.$bus.$emit("changeSelf"),this.$store.commit("changeSelf",e)},previewmouseenterEvent:function(t,e){this.linkStatus&&e.id!=this.props.arrowstartPreview.id&&t.target.classList.contains("block")&&(this.props.arrowendPreview=e)},previewmouseleaveEvent:function(){this.linkStatus&&event.target.classList.contains("block")&&(this.props.arrowendPreview=null)},backtoolclickEvent:function(){this.parent?(console.log("send changeSelf"),this.$bus.$emit("changeSelf"),this.$store.commit("gobackSelf")):console.log("no parent")},savetoolclickEvent:function(t,e){t.setAttribute("xmlns","http://www.w3.org/2000/svg");var n=t.outerHTML,o='<?xml version="1.0" standalone="no"?>\r\n',s=new Blob([o,n],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)},getMousePosition:function(){var t=this.svg.getScreenCTM();console.log(t)},startLink:function(t,e){t.target.classList.contains("block")&&(this.props.arrowstartPreview||(this.linkStatus=!0,this.props.arrowstartPreview=e))},endLink:function(){this.linkStatus=!1,this.$store.commit("endLink",this.props.arrowendPreview),this.props.arrowstartPreview=null,this.props.arrowendPreview=null},Link:function(t){t.preventDefault(),this.$store.state.arrowObject?this.$store.commit("setArrowPosition",{event:t,props:this.props}):this.$store.commit("addElement",{type:"arrow",props:this.props,event:t})},startPen:function(t){t.target.classList.contains("Svg")&&(this.allowPen=!0,this.props.viewBox.startPoint=[this.props.viewBox["min-x"]+t.offsetX,this.props.viewBox["min-y"]+t.offsetY])},endPen:function(){this.allowPen=!1},pen:function(t){this.props.viewBox["min-x"]=this.props.viewBox.startPoint[0]-t.offsetX,this.props.viewBox["min-y"]=this.props.viewBox.startPoint[1]-t.offsetY,this.$store.commit("setCTM")},zoom:function(t){var e=this.props.viewBox.width+t.deltaY,n=this.props.viewBox.height+t.deltaY;this.props.viewBox.width=e>=0?e:0,this.props.viewBox.height=n>=0?n:0,this.$store.commit("setCTM")},key_u:function(){console.log(this.done,this.undone)}}},_=E,I=(n("bae1"),Object(f["a"])(_,i,a,!1,null,"17cbd858",null)),C=I.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default",on:{mouseenter:t.setshowMag,mouseleave:t.setshowMag}},[n("svg",{ref:"all",attrs:{id:"all",version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight},on:{mousemove:t.mousemoveEvent}},[n("g",{ref:"g"},t._l(t.alldata.childs,(function(e,o){return n("TreeBlock",{key:o,attrs:{pkey:o,parentCoor:[],data:e,level:t.l,startPoint:t.lastPoint}})})),1)]),n("Magnifier",{directives:[{name:"show",rawName:"v-show",value:t.showMag,expression:"showMag"}],attrs:{mouse:t.mouse}})],1)},S=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("g",[n("path",t._b({attrs:{d:t.d}},"path",t.pathObject,!1)),n("rect",t._b({on:{click:t.rectClick}},"rect",t.styleObject,!1)),t._l(t.data.childs,(function(e,o){return n("TreeBlock",{key:o,attrs:{pkey:o,parentCoor:t.coor,data:e,level:t.l,startPoint:t.lastPoint}})}))],2):t._e()},M=[],D=(n("a630"),{name:"TreeBlock",props:["data","level","startPoint","pkey","parentCoor"],created:function(){this.$store.commit("addChildNum",{l:this.l,pkey:this.pkey,parentCoor:this.parentCoor}),this.index=this.$store.state.NumOfChilds[this.l]},data:function(){return{defaultSpace:10,index:null,ifFocus:!1,content:"",styleDefault:{width:"20",height:"6",stroke:"black",fill:"transparent","stroke-width":"1"},pathDefault:{stroke:"#000","stroke-width":"1"},textDefault:{fill:"black","text-anchor":"middle","dominant-baseline":"middle"}}},computed:{visible:function(){return"arrow"!=this.data.type},connectPoint:function(){return[this.startPoint[0]+this.defaultSpace,this.index*this.defaultSpace]},lastPoint:function(){var t=this.connectPoint[0]+parseInt(this.styleDefault.width),e=this.connectPoint[1];return[t,e]},l:function(){return this.level+1},coor:function(){var t=Array.from(this.parentCoor);return t.push(this.pkey),t},styleObject:function(){return Object.assign(this.styleDefault,{fill:this.data.mainPage?"green":"transparent",x:"".concat(this.connectPoint[0]),y:"".concat(this.connectPoint[1])})},pathObject:function(){return Object.assign(this.pathDefault,{})},textObject:function(){return Object.assign(this.textDefault,{x:"".concat(this.data.position.mouseclickposition[0]),y:"".concat(this.data.position.mouseclickposition[1])})},d:function(){if("0,0"!=this.startPoint){var t="".concat(this.startPoint[0],",").concat(this.startPoint[1]),e="".concat(this.connectPoint[0],",").concat(this.connectPoint[1]);return"M".concat(t," L").concat(e)}return""},alldata:function(){return console.log("here"),console.log(this.$store.state.alldata),this.$store.state.alldata}},methods:{rectClick:function(){console.log("send changeSelf"),this.$bus.$emit("changeSelf"),this.$store.commit("changeSelf",this.data)}},destroyed:function(){this.$store.commit("reduceChildNum",this.l)}}),H=D,T=(n("7e0d"),Object(f["a"])(H,L,M,!1,null,"3f1a9689",null)),A=T.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"magnifier",style:t.positionObject},[n("svg",{ref:"svg",attrs:{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight,viewBox:t.viewBox}},[n("g")]),n("v-icon",{staticClass:"mouse-icon",attrs:{name:"mouse-pointer"}})],1)},N=[],F={props:["mouse"],data:function(){return{props:{clientHeight:null,clientWidth:null}}},watch:{},computed:{viewBox:function(){return this.mouse.length?"".concat(this.mouse[0]-10," ").concat(this.mouse[1]-10," 20 20"):"0 0 10 10"},positionObject:function(){return{height:"80px",width:"80px",left:"".concat(this.mouse[0]+50,"px"),top:"".concat(this.mouse[1]+10,"px")}}},created:function(){var t=this;window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){var t=this;this.mag=this.$refs.mag,this.$bus.$on("all:refs",(function(e){var n=t.$refs.svg.getElementsByTagName("g")[0];n.replaceWith(e)}))},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth}}},X=F,Y=(n("3708"),Object(f["a"])(X,W,N,!1,null,"88c02386",null)),z=Y.exports,R={components:{TreeBlock:A,Magnifier:z},data:function(){return{l:0,showMag:!1,lastPoint:[0,0],mouse:[],props:{clientHeight:null,clientWidth:null,viewBox:{"min-x":0,"min-y":0,width:null,height:null,startPoint:[0,0]}}}},computed:{alldata:function(){return this.$store.state.alldata}},created:function(){var t=this;window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){},beforeUpdate:function(){},updated:function(){this.$bus.$emit("all:refs",this.$refs.g.cloneNode(!0))},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth,this.props.viewBox.height=this.props.clientHeight,this.props.viewBox.width=this.props.clientWidth},mousemoveEvent:function(t){this.mouse=[t.offsetX,t.offsetY]},setshowMag:function(){this.showMag=!this.showMag}}},q=R,U=(n("79f0"),Object(f["a"])(q,B,S,!1,null,"4ffecb92",null)),V=U.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default"},[t._v(" Demo.vue ")])},J=[],Q={},Z=Q,K=(n("dcf5"),Object(f["a"])(Z,G,J,!1,null,"6b9500e2",null)),tt=K.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default"},[t._v(" Style.vue ")])},nt=[],ot={},st=ot,rt=(n("d9ce"),Object(f["a"])(st,et,nt,!1,null,"44f142f4",null)),it=rt.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default"},[n("b-button-group",{attrs:{size:"sm"}},[n("b-button",{on:{click:t.backclickEvent}},[n("v-icon",{attrs:{name:"chevron-left"}})],1),n("b-button",{on:{click:t.saveclickEvent}},[n("v-icon",{attrs:{name:"save"}})],1),n("b-button",{on:{click:t.undoclickEvent}},[n("v-icon",{attrs:{name:"undo"}})],1),n("b-button",{on:{click:t.redoclickEvent}},[n("v-icon",{attrs:{name:"redo"}})],1)],1)],1)},ct=[],lt={methods:{backclickEvent:function(){this.$bus.$emit("tool:back")},saveclickEvent:function(){this.$bus.$emit("tool:save")},undoclickEvent:function(){this.$bus.$emit("tool:undo")},redoclickEvent:function(){this.$bus.$emit("tool:redo")}}},ut=lt,pt=(n("4da2"),Object(f["a"])(ut,at,ct,!1,null,"15fc4adb",null)),ht=pt.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},ready:function(e){return t.onEditorReady(e)},change:t.onEditorChange},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})},ft=[],vt=(n("a753"),n("8096"),n("14e1"),n("953d")),wt={components:{quillEditor:vt["quillEditor"]},data:function(){return{content:"",focusId:null,editorOption:{placeholder:"Select a element!",modules:{toolbar:["bold","italic","underline","strike"]}}}},created:function(){var t=this;this.$bus.$on("Block:focus",(function(e,n){t.content=e,t.focusId=n}))},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorReady:function(){},onEditorChange:function(t){var e=t.html;this.editorOption.placeholder="Type something...",this.$bus.$emit("TextEditor:change",e,this.focusId)}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){console.log("this is current quill instance object",this.editor)}},mt=wt,bt=Object(f["a"])(mt,dt,ft,!1,null,null,null),gt=bt.exports,yt=n("2f62"),kt=(n("4160"),n("13d5"),n("ac1f"),n("1276"),n("159b"),n("d4ec")),xt=function t(e,n,o,s){Object(kt["a"])(this,t),this.type=e,this.props=n,this.event=o,this.mainPage=!1,$t.commit("newID"),this.id=$t.state.IdArray[$t.state.IdArray.length-1],"block"==e?(this.arrows={start:[],end:[]},this.content="",this.props={mouseclickposition:[o.offsetX,o.offsetY],styleObject:{},textObject:{}},this.childs=[],this.parent=s):"arrow"==e&&(this.position={},this.props={visable:!1,startX:null,startY:null,offsetX:null,offsetY:null,arrowstartPreview:n.arrowstartPreview,arrowendPreview:null},n.arrowstartPreview.arrows.start.push(this),this.childs=[],this.parent=null)},jt=xt,Pt=n("e21a"),Ot=n.n(Pt);o["default"].use(yt["a"]),o["default"].use(Ot.a,{ignoreMutations:["newID","setArrowPosition"]});var $t=new yt["a"].Store({strict:"debug",state:{svg:null,ctm:null,ictm:null,IdArray:[],FocusingElementId:null,alldata:{id:"1",type:"block",position:{},props:{},childs:[],parent:null},self:{},arrowObject:null,NumOfChilds:[0],coor:[]},getters:{},mutations:{getSVG:function(t,e){t.svg=e},setCTM:function(t){t.ctm=t.svg.svg.getCTM(),t.ictm=t.ctm.inverse()},assignBeginingNode:function(t){t.self=t.alldata},changeSelf:function(t,e){console.log("state.self change"),t.self.mainPage=!1,t.self=e,t.self.mainPage=!0},gobackSelf:function(t){console.log("state.self go back"),t.self.mainPage=!1,t.self=t.self.parent,t.self.mainPage=!0},addElement:function(t,e){var n=e.type,o=e.props,s=e.event,r=e.parent,i=new jt(n,o,s,r);t.self.childs.push(i),"arrow"==n&&(t.arrowObject=i)},clearInitPosition:function(t,e){var n=e.data,o=e.style;n.props.mouseclickposition=null,n.props.styleObject=o},setArrowPosition:function(t,e){t.arrowObject.props.visable=!0,t.arrowObject.props.offsetX=t.ictm.a*e.event.offsetX+t.ictm.c*e.event.offsetY+t.ictm.e,t.arrowObject.props.offsetY=t.ictm.b*e.event.offsetX+t.ictm.d*e.event.offsetY+t.ictm.f,e.props.arrowendPreview?t.arrowObject.props.arrowendPreview=e.props.arrowendPreview:t.arrowObject.props.arrowendPreview=null},endLink:function(t,e){t.arrowObject.props.visable=!0,t.arrowObject.props.arrowendPreview=e,e&&e.arrows.end.push(t.arrowObject),t.arrowObject=null},cancelLink:function(t){console.log("cacel link"),t.self.childs.pop()},emptyState:function(){this.replaceState({IdArray:[],FocusingElementId:null,alldata:{id:"1",type:"block",position:{},props:{},childs:[],parent:null},self:{childs:[]},arrowObject:null})},newID:function(t){var e;if(0!=t.IdArray.length){var n=parseInt(t.IdArray[t.IdArray.length-1].split("_")[1]);e="cpn_"+(n+1),t.IdArray.push(e)}else e="cpn_0",t.IdArray.push(e)},changeFocusingElement:function(t,e){console.log("change focus",e),t.FocusingElementId=e},addChildNum:function(t,e){var n=e.parentCoor.reduce((function(t,e){return t[e]}),t.coor);n[e.pkey]||n.push([]),t.NumOfChilds[e.l]?t.NumOfChilds[e.l]+=1:t.NumOfChilds.push(1)},reduceChildNum:function(t,e){t.NumOfChilds[e]-=1},editContent:function(t,e){var n=e.data,o=e.content,s=e.clientHeight;n.props.styleObject.height=s,n.content=o},setBlockPosition:function(t,e){var n=e.data,o=e.position;n.arrows.start.forEach((function(t){t.props.offsetX+=1,t.props.offsetX-=1})),n.arrows.end.forEach((function(t){t.props.offsetX+=1,t.props.offsetX-=1})),n.props.styleObject.x=o.x,n.props.styleObject.y=o.y}},actions:{},modules:{}}),Et=n("5f5b"),_t=n("b1e0"),It=(n("f9e3"),n("2dd8"),n("d06d"),n("0874"));o["default"].use(yt["a"]),o["default"].use(Et["a"]),o["default"].use(_t["a"]),o["default"].component("v-icon",It["a"]),o["default"].prototype.$bus=new o["default"];var Ct={name:"app",components:{Main:C,All:V,Demo:tt,Style:it,Tool:ht,TextEditor:gt},store:$t,state:{},methods:{},data:function(){return{data:{}}},created:function(){this.data=this.$store.state.alldata}},Bt=Ct,St=(n("034f"),Object(f["a"])(Bt,s,r,!1,null,null,null)),Lt=St.exports,Mt=n("8c4f"),Dt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),o("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},Ht=[],Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._m(0),n("h3",[t._v("Installed CLI Plugins")]),t._m(1),n("h3",[t._v("Essential Links")]),t._m(2),n("h3",[t._v("Ecosystem")]),t._m(3)])},At=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v(" For a guide and recipes on how to configure / customize this project,"),n("br"),t._v(" check out the "),n("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(". ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router",target:"_blank",rel:"noopener"}},[t._v("router")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-vuex",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[t._v("eslint")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),n("li",[n("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),n("li",[n("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),n("li",[n("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],Wt={name:"HelloWorld",props:{msg:String}},Nt=Wt,Ft=(n("b2a1"),Object(f["a"])(Nt,Tt,At,!1,null,"a87ea5ee",null)),Xt=Ft.exports,Yt={name:"Home",components:{HelloWorld:Xt}},zt=Yt,Rt=Object(f["a"])(zt,Dt,Ht,!1,null,null,null),qt=Rt.exports;o["default"].use(Mt["a"]);var Ut=[{path:"/",name:"Home",component:qt},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Vt=new Mt["a"]({mode:"history",base:"/templates/dist/",routes:Ut}),Gt=Vt;o["default"].config.productionTip=!1,new o["default"]({router:Gt,store:$t,render:function(t){return t(Lt)}}).$mount("#app")},"79f0":function(t,e,n){"use strict";var o=n("d963"),s=n.n(o);s.a},"7e0d":function(t,e,n){"use strict";var o=n("b190"),s=n.n(o);s.a},"85ec":function(t,e,n){},"90e1":function(t,e,n){"use strict";var o=n("4e1e"),s=n.n(o);s.a},b190:function(t,e,n){},b2a1:function(t,e,n){"use strict";var o=n("2ce1"),s=n.n(o);s.a},bae1:function(t,e,n){"use strict";var o=n("d314"),s=n.n(o);s.a},cf05:function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"},d314:function(t,e,n){},d963:function(t,e,n){},d9ce:function(t,e,n){"use strict";var o=n("3416"),s=n.n(o);s.a},dcf5:function(t,e,n){"use strict";var o=n("2d12"),s=n.n(o);s.a},fb75:function(t,e,n){}});
//# sourceMappingURL=app.dfdc44af.js.map