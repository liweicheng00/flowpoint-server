(function(t){function e(e){for(var o,r,a=e[0],c=e[1],l=e[2],u=0,d=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},s={app:0},i=[];function r(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"7e9147c1"}[t]+".js"}function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=s[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=s[t]=[e,o]}));e.push(n[2]=o);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=r(t);var l=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=s[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,n[1](l)}s[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/templates/dist/",a.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0f55":function(t,e,n){},"15e5":function(t,e,n){},"27a5":function(t,e,n){},"2d12":function(t,e,n){},4127:function(t,e,n){"use strict";var o=n("27a5"),s=n.n(o);s.a},"429e":function(t,e,n){"use strict";var o=n("73d1"),s=n.n(o);s.a},"452c":function(t,e,n){},"48fe":function(t,e,n){},"4da2":function(t,e,n){"use strict";var o=n("5359"),s=n.n(o);s.a},5359:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Flow")]),t._v("| "),n("router-link",{attrs:{to:"/EditStyle"}},[t._v("Edit Module")])],1),n("div",[n("router-view")],1)])},i=[],r=n("2f62"),a=(n("4160"),n("13d5"),n("a434"),n("ac1f"),n("1276"),n("159b"),n("d4ec")),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=t%e;return n>e/2?t+(e-n):t-n},l=c,u=function t(e,n,o,s){Object(a["a"])(this,t),this.type=e,this.props=n,this.event=o,this.mainPage=!1,f.commit("newID"),this.id=f.state.IdArray[f.state.IdArray.length-1],"block"==e?(this.arrows={start:[],end:[]},this.content="",this.props={mouseclickposition:[l(o.offsetX),l(o.offsetY)],styleObject:{},textObject:{}},this.childs=[],this.parent=s):"arrow"==e&&(this.position={},this.props={visable:!1,startX:null,startY:null,offsetX:null,offsetY:null,arrowstartPreview:n.arrowstartPreview,arrowendPreview:null},n.arrowstartPreview.arrows.start.push(this),this.childs=[],this.parent=null)},p=u,d=n("e21a"),h=n.n(d);o["default"].use(r["a"]),o["default"].use(h.a,{ignoreMutations:["newID","setArrowPosition"]});var f=new r["a"].Store({strict:"debug",state:{svg:null,ctm:null,ictm:null,IdArray:[],FocusingElementId:null,alldata:{id:"1",type:"block",position:{},props:{},childs:[],parent:null},self:{},arrowObject:null,NumOfChilds:[0],coor:[]},getters:{},mutations:{getSVG:function(t,e){t.svg=e},clearSVG:function(t){t.svg=null},setCTM:function(t){t.ctm=t.svg.svg.getCTM(),t.ictm=t.ctm.inverse()},assignBeginingNode:function(t){t.self=t.alldata},changeSelf:function(t,e){console.log("state.self change"),t.self.mainPage=!1,t.self=e,t.self.mainPage=!0},gobackSelf:function(t){console.log("state.self go back"),t.self.mainPage=!1,t.self=t.self.parent,t.self.mainPage=!0},addElement:function(t,e){var n=e.type,o=e.props,s=e.event,i=e.parent,r=new p(n,o,s,i);t.self.childs.push(r),"arrow"==n&&(t.arrowObject=r)},clearInitPosition:function(t,e){var n=e.data,o=e.style;n.props.mouseclickposition=null,n.props.styleObject=o},setArrowPosition:function(t,e){t.arrowObject.props.visable=!0,t.arrowObject.props.offsetX=t.ictm.a*e.event.offsetX+t.ictm.c*e.event.offsetY+t.ictm.e,t.arrowObject.props.offsetY=t.ictm.b*e.event.offsetX+t.ictm.d*e.event.offsetY+t.ictm.f,e.props.arrowendPreview?t.arrowObject.props.arrowendPreview=e.props.arrowendPreview:t.arrowObject.props.arrowendPreview=null},endLink:function(t,e){t.arrowObject.props.visable=!0,t.arrowObject.props.arrowendPreview=e,e?e.arrows.end.push(t.arrowObject):this._mutations.cancelLink[0](),t.arrowObject=null},cancelLink:function(t){console.log("cacel link"),t.self.childs.pop()},emptyState:function(){this.replaceState({IdArray:[],FocusingElementId:null,alldata:{id:"1",type:"block",position:{},props:{},childs:[],parent:null},self:{childs:[]},arrowObject:null})},newID:function(t){var e;if(0!=t.IdArray.length){var n=parseInt(t.IdArray[t.IdArray.length-1].split("_")[1]);e="cpn_"+(n+1),t.IdArray.push(e)}else e="cpn_0",t.IdArray.push(e)},changeFocusingElement:function(t,e){console.log("change focus",e),t.FocusingElementId=e},addChildNum:function(t,e){var n=e.parentCoor.reduce((function(t,e){return t[e]}),t.coor);n[e.pkey]||n.push([]),t.NumOfChilds[e.l]?t.NumOfChilds[e.l]+=1:t.NumOfChilds.push(1)},reduceChildNum:function(t,e){t.NumOfChilds[e]-=1,t.NumOfChilds[e]||t.NumOfChilds.splice(e,e)},editContent:function(t,e){var n=e.data,o=e.content,s=e.ref;n.content=o,n.props.styleObject.height=s.clientHeight},setBlockPosition:function(t,e){var n=e.data,o=e.position;n.arrows.start.forEach((function(t){t.props.offsetX+=1,t.props.offsetX-=1})),n.arrows.end.forEach((function(t){t.props.offsetX+=1,t.props.offsetX-=1})),n.props.styleObject.x="".concat(l(o.x)),n.props.styleObject.y="".concat(l(o.y))}},actions:{},modules:{}}),v=n("5f5b"),w=n("b1e0"),m=(n("f9e3"),n("2dd8"),n("d06d"),n("0874"));o["default"].use(r["a"]),o["default"].use(v["a"]),o["default"].use(w["a"]),o["default"].component("v-icon",m["a"]),o["default"].prototype.$bus=new o["default"];var b={name:"app",store:f},y=b,g=(n("4127"),n("b0a0"),n("2877")),k=Object(g["a"])(y,s,i,!1,null,null,null),x=k.exports,P=(n("d3b7"),n("8c4f")),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",{attrs:{fluid:""}},[n("b-form-row",[n("b-col",{attrs:{cols:"8"}},[n("Tool"),n("Main")],1),n("b-col",[n("All"),n("Demo"),n("Style"),n("TextEditor")],1)],1)],1)],1)},j=[],$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block"},[n("svg",{ref:"svg",staticClass:"Svg",attrs:{id:"block",version:"2",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight,viewBox:t.viewBox,preserveAspectRatio:"xMidYMid slice"},on:{contextmenu:function(t){t.preventDefault()},click:t.clickEvent,dblclick:function(e){return e.target!==e.currentTarget?null:t.dblclickEvent(e)},mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftmousedownEvent(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftmouseupEvent(e)},mousemove:t.mousemoveEvent,mouseleave:t.mouseleaveEvent,wheel:t.wheelEvent}},[n("g",t._l(t.childs,(function(e,o){return n("Preview",{key:o,attrs:{data:e,parent:t.self},on:{dblclick:t.previewdblclickEvent,"mousedown-right":t.previewmousedownEvent,"mouseup-right":t.previewmouseupEvent,"mouseup-left":t.previewmouseupEventL,"mousedown-left":t.previewmousedownEventL,mouseenter:t.previewmouseenterEvent,mouseleave:t.previewmouseleaveEvent}})})),1)])])},E=[],_=(n("99af"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{class:t.classList,on:{mousedown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.mousedownleft(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.mousedownright(e)}],mouseup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.mouseupleft(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.mouseupright(e)}],dblclick:t.dblclick,mouseenter:t.mouseenter,mouseleave:t.mouseleave}},["block"==t.data.type?n("Block",{attrs:{data:t.data,parent:t.parent}}):"arrow"==t.data.type?n("Arrow",{attrs:{data:t.data}}):t._e()],1)}),I=[],C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("defs",[n("marker",{attrs:{id:"arrow",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto"}},[n("path",{attrs:{d:"M0,0 L0,6 L9,3 z",fill:"#f00"}})])]),n("path",{attrs:{d:t.d,stroke:"#000","stroke-width":"1","marker-end":"url(#arrow)"}})])},B=[],S={props:{data:Object},data:function(){return{startSection:1,endSection:3}},computed:{startPoint:function(){if(console.log("startPoint"),this.data.props.visable){if(this.data.props.arrowstartPreview){var t,e=parseInt(this.data.props.arrowstartPreview.props.styleObject.y)+parseInt(this.data.props.arrowstartPreview.props.styleObject.height)/2;return t=this.data.props.offsetX>parseInt(this.data.props.arrowstartPreview.props.styleObject.x)?parseInt(this.data.props.arrowstartPreview.props.styleObject.x)+parseInt(this.data.props.arrowstartPreview.props.styleObject.width):parseInt(this.data.props.arrowstartPreview.props.styleObject.x),[t,e]}return console.warn("something wrong!"),[0,0]}return[0,0]},endPoint:function(){var t,e;return console.log("endPoint"),this.data.props.visable?this.data.props.arrowendPreview?(t=this.data.props.arrowendPreview.props.styleObject.x,e=parseInt(this.data.props.arrowendPreview.props.styleObject.y)+parseInt(this.data.props.arrowendPreview.props.styleObject.height)/2,[t,e]):(t=this.data.props.offsetX,e=this.data.props.offsetY,[t,e]):[0,0]},d:function(){var t=this.pathCalculate(this.data.props),e="".concat(t.x1,",").concat(t.y1),n="".concat(t.x2,",").concat(t.y2);return"M".concat(e," L").concat(n)}},methods:{setNodePosition:function(t,e,n){switch(n){case 1:return t[0]-e[0]<0?t[1]-e[1]>=0?4:2:1;case 2:return t[1]-e[1]>=0?t[0]-e[0]>=0?1:3:2;case 3:return t[0]-e[0]>=0?t[1]-e[1]>=0?4:2:3;case 4:return t[1]-e[1]<0?t[0]-e[0]>=0?1:3:4}},pathCalculate:function(t){var e;if(!t.visable)return{x1:0,y1:0,x2:0,y2:0};if(e={x1:parseInt(t.arrowstartPreview.props.styleObject.x)+parseInt(t.arrowstartPreview.props.styleObject.width),y1:parseInt(t.arrowstartPreview.props.styleObject.y)+parseInt(t.arrowstartPreview.props.styleObject.height)/2,x2:t.offsetX,y2:t.offsetY},t.arrowendPreview)switch(e.x2=t.arrowendPreview.props.styleObject.x,e.y2=t.arrowendPreview.props.styleObject.y,this.endSection=this.setNodePosition([e.x1,e.y1],[e.x2,e.y2],this.endSection),this.endSection){case 1:e.x2=parseInt(t.arrowendPreview.props.styleObject.x)+parseInt(t.arrowendPreview.props.styleObject.width),e.y2=parseInt(t.arrowendPreview.props.styleObject.y)+parseInt(t.arrowendPreview.props.styleObject.height)/2;break;case 2:e.x2=parseInt(t.arrowendPreview.props.styleObject.x)+parseInt(t.arrowendPreview.props.styleObject.width)/2,e.y2=t.arrowendPreview.props.styleObject.y;break;case 3:e.x2=t.arrowendPreview.props.styleObject.x,e.y2=parseInt(t.arrowendPreview.props.styleObject.y)+parseInt(t.arrowendPreview.props.styleObject.height)/2;break;case 4:e.x2=parseInt(t.arrowendPreview.props.styleObject.x)+parseInt(t.arrowendPreview.props.styleObject.width)/2,e.y2=parseInt(t.arrowendPreview.props.styleObject.y)+parseInt(t.arrowendPreview.props.styleObject.height);break}switch(this.startSection=this.setNodePosition([e.x2,e.y2],[e.x1,e.y1],this.startSection),this.startSection){case 1:e.x1=parseInt(t.arrowstartPreview.props.styleObject.x)+parseInt(t.arrowstartPreview.props.styleObject.width),e.y1=parseInt(t.arrowstartPreview.props.styleObject.y)+parseInt(t.arrowstartPreview.props.styleObject.height)/2;break;case 2:e.x1=parseInt(t.arrowstartPreview.props.styleObject.x)+parseInt(t.arrowstartPreview.props.styleObject.width)/2,e.y1=parseInt(t.arrowstartPreview.props.styleObject.y);break;case 3:e.x1=parseInt(t.arrowstartPreview.props.styleObject.x),e.y1=parseInt(t.arrowstartPreview.props.styleObject.y)+parseInt(t.arrowstartPreview.props.styleObject.height)/2;break;case 4:e.x1=parseInt(t.arrowstartPreview.props.styleObject.x)+parseInt(t.arrowstartPreview.props.styleObject.width)/2,e.y1=parseInt(t.arrowstartPreview.props.styleObject.y)+parseInt(t.arrowstartPreview.props.styleObject.height);break}return e}}},L=S,D=Object(g["a"])(L,C,B,!1,null,"4a88a05e",null),M=D.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{on:{focus:t.onFocus}},[n("rect",t._b({staticClass:"block",class:{focus:t.ifFocus},attrs:{id:t.data.id}},"rect",t.data.props.styleObject,!1)),n("foreignObject",{attrs:{x:t.styleObject.x,y:t.styleObject.y,width:t.data.props.styleObject.width,height:t.data.props.styleObject.height,"pointer-events":"none"}},[n("body",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",{ref:"content",staticClass:"fo"},[n("div",{class:[t.fo_content],domProps:{innerHTML:t._s(t.data.content)}})])])])],1)},A=[],F=(n("b0c0"),{props:{data:Object,parent:Object},data:function(){return{ifFocus:!1,allowMove:!1,styleDefault:{width:"100",height:"30",stroke:"black",rx:"3",fill:"transparent","stroke-width":"1",x:"0",y:"0"},textDefault:{},fo_content:""}},created:function(){var t=this;this.$bus.$on("TextEditor:change",(function(e,n){t.ifFocus&&t.data.id==n&&t.$store.commit("editContent",{data:t.data,content:e,ref:t.$refs.content})})),this.$bus.$on("Style:change",(function(e){t.fo_content=e.name,console.log(e)}))},watch:{focusingElementId:function(t){t==this.data.id?(this.ifFocus=!0,this.$bus.$emit("Block:focus",this.data.content,this.data.id)):this.ifFocus=!1}},computed:{styleObject:function(){if(this.data.props.mouseclickposition){var t=this.$store.state.ictm,e=this.data.props.mouseclickposition[0]-parseInt(this.styleDefault.width)/t.a/2,n=this.data.props.mouseclickposition[1]-parseInt(this.styleDefault.height)/t.a/2,o=t.a*e+t.c*n+t.e,s=t.b*e+t.d*n+t.f,i=Object.assign(this.styleDefault,{color:"red",x:"".concat(o),y:"".concat(s)});return this.$store.commit("clearInitPosition",{data:this.data,style:i}),i}return this.data.props.styleObject},textObject:function(){return Object.assign(this.textDefault,{})},focusingElementId:function(){return this.$store.state.FocusingElementId}},mounted:function(){},methods:{onFocus:function(){this.$store.commit("changeFocusingElement",this.data.id)},resizeBody:function(){console.log("here")},gridAttach:function(t,e){var n=t%e;return n>e/2?t+(e-n):t-n}},beforeDestroy:function(){this.$bus.$off("TextEditor:change")}}),N=F,H=(n("5c86"),Object(g["a"])(N,T,A,!1,null,"8cd6b27a",null)),z=H.exports,X={components:{Arrow:M,Block:z},props:{data:Object,parent:Object},mounted:function(){},computed:{classList:function(){var t={Preview:!0};return t[this.data.type]=!0,t}},methods:{mousedownright:function(t){this.$emit("mousedown-right",t,this.data)},mouseupright:function(t){this.$emit("mouseup-right",t,this.data)},mouseupleft:function(t){this.$emit("mouseup-left",t,this.data)},mousedownleft:function(t){this.$emit("mousedown-left",t,this.data)},mouseenter:function(t){this.$emit("mouseenter",t,this.data)},mouseleave:function(t){this.$emit("mouseleave",t,this.data)},dblclick:function(t){this.$emit("dblclick",t,this.data)}},beforeDestroy:function(){}},W=X,Y=(n("adae"),Object(g["a"])(W,_,I,!1,null,"6b0c98f8",null)),R=Y.exports,V={components:{Preview:R},props:{},data:function(){return{allowZoom:!1,allowPen:!1,allowDrag:!1,dom:{},linkStatus:!1,arrowObject:null,arrowDom:null,props:{clientHeight:null,clientWidth:null,viewBox:{"min-x":0,"min-y":0,width:null,height:null,startPoint:[0,0]},arrowstartPreview:null,arrowendPreview:null}}},created:function(){var t=this;this.$nextTick((function(){t.$store.commit("getSVG",t.$refs),t.$store.commit("setCTM")})),this.$bus.$on("tool:back",(function(){t.backtoolclickEvent()})),this.$bus.$on("tool:save",(function(){console.log(t.$refs),t.savetoolclickEvent(t.$refs.svg)})),this.$bus.$on("tool:undo",(function(){t.canUndo&&t.undo()})),this.$bus.$on("tool:redo",(function(){t.canRedo&&t.redo()})),window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){this.windowresizeEvent(),this.$store.commit("assignBeginingNode")},computed:{viewBox:{get:function(){return this.props.clientHeight?"".concat(this.props.viewBox["min-x"]," ").concat(this.props.viewBox["min-y"]," ").concat(this.props.viewBox.width," ").concat(this.props.viewBox.height):(console.warn("Waring: No viewBox"),"0 0 0 0")},set:function(t){this.props.viewBox["min-x"]=t[0],this.props.viewBox["min-y"]=t[1]}},data:function(){return this.$store.state.alldata},self:function(){return this.$store.state.self},childs:function(){return this.self.childs},parent:function(){return this.self.parent}},watch:{allowZoom:function(t){t||this.$el.on(".zoom",null)}},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth,this.props.viewBox.height=this.props.clientHeight,this.props.viewBox.width=this.props.clientWidth},clickEvent:function(t){this.linkStatus&&(this.$store.commit("cancelLink"),this.endLink(t))},dblclickEvent:function(t){this.$store.commit("addElement",{type:"block",props:this.props,event:t,parent:this.self})},leftmousedownEvent:function(t){this.startPen(t)},leftmouseupEvent:function(t){this.endPen(t)},mousemoveEvent:function(t){t.preventDefault(),this.linkStatus?this.Link(t):this.allowPen?this.pen(t):this.allowDrag&&this.drag(t,this.dragData)},mouseleaveEvent:function(){},wheelEvent:function(t){this.zoom(t)},previewmousedownEventL:function(t,e){this.startDrag(e)},previewmouseupEventL:function(){this.endDrag()},previewmousedownEvent:function(t,e){this.startLink(t,e)},previewmouseupEvent:function(t,e){this.endLink(t,e)},previewdblclickEvent:function(t,e){console.log("here"),this.initViewbox(),this.$store.commit("changeSelf",e)},previewmouseenterEvent:function(t,e){this.linkStatus&&e.id!=this.props.arrowstartPreview.id&&t.target.classList.contains("block")&&(this.props.arrowendPreview=e)},previewmouseleaveEvent:function(){this.linkStatus&&event.target.classList.contains("block")&&(this.props.arrowendPreview=null)},backtoolclickEvent:function(){this.parent?(this.initViewbox(),this.$store.commit("gobackSelf")):console.log("no parent")},savetoolclickEvent:function(t,e){t.setAttribute("xmlns","http://www.w3.org/2000/svg");var n=t.outerHTML,o='<?xml version="1.0" standalone="no"?>\r\n',s=new Blob([o,n],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},initViewbox:function(){this.viewBox=[0,0]},startLink:function(t,e){t.target.classList.contains("block")&&(this.props.arrowstartPreview||(this.linkStatus=!0,this.props.arrowstartPreview=e))},endLink:function(){this.linkStatus=!1,this.$store.commit("endLink",this.props.arrowendPreview),this.props.arrowstartPreview=null,this.props.arrowendPreview=null},Link:function(t){t.preventDefault(),this.$store.state.arrowObject?this.$store.commit("setArrowPosition",{event:t,props:this.props}):this.$store.commit("addElement",{type:"arrow",props:this.props,event:t})},startPen:function(t){t.target.classList.contains("Svg")&&(this.allowPen=!0,this.props.viewBox.startPoint=[this.props.viewBox["min-x"]+t.offsetX,this.props.viewBox["min-y"]+t.offsetY])},endPen:function(){this.allowPen=!1},pen:function(t){this.props.viewBox["min-x"]=this.props.viewBox.startPoint[0]-t.offsetX,this.props.viewBox["min-y"]=this.props.viewBox.startPoint[1]-t.offsetY,this.$store.commit("setCTM")},zoom:function(t){var e=this.props.viewBox.width+t.deltaY,n=this.props.viewBox.height+t.deltaY;this.props.viewBox.width=e>=0?e:0,this.props.viewBox.height=n>=0?n:0,this.$store.commit("setCTM")},startDrag:function(t){this.allowDrag=!0,this.dragData=t},drag:function(t,e){if(this.allowDrag){var n=this.$store.state.ictm,o=t.offsetX-parseInt(e.props.styleObject.width)/n.a/2,s=t.offsetY-parseInt(e.props.styleObject.height)/n.a/2,i=n.a*o+n.c*s+n.e,r=n.b*o+n.d*s+n.f;this.$store.commit("setBlockPosition",{data:e,position:{x:i,y:r}})}},endDrag:function(){this.allowDrag=!1,this.dragData=null}},beforeDestroy:function(){this.$store.commit("clearSVG")}},q=V,G=(n("9ada"),Object(g["a"])(q,$,E,!1,null,"096a5fab",null)),U=G.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default",on:{mouseenter:t.setshowMag,mouseleave:t.setshowMag}},[n("svg",{ref:"all",attrs:{id:"all",version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight},on:{mousemove:t.mousemoveEvent}},[n("g",{ref:"g"},[n("rect",t._b({on:{click:t.rectClick}},"rect",t.initBlockProps,!1)),t._l(t.filtChilds,(function(e,o){return n("TreeBlock",{key:o,attrs:{pkey:o,parentCoor:[],data:e,level:t.l,startPoint:t.lastPoint}})}))],2)]),n("Magnifier",{directives:[{name:"show",rawName:"v-show",value:t.showMag,expression:"showMag"}],attrs:{mouse:t.mouse}})],1)},Q=[],Z=(n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("g",[n("path",t._b({attrs:{d:t.d}},"path",t.pathDefault,!1)),n("rect",t._b({on:{click:t.rectClick}},"rect",t.styleObject,!1)),t._l(t.filtChilds,(function(e,o){return n("TreeBlock",{key:o,attrs:{pkey:o,parentCoor:t.coor,data:e,level:t.l,startPoint:t.lastPoint}})}))],2):t._e()}),K=[],tt=(n("a630"),{name:"TreeBlock",props:["data","level","startPoint","pkey","parentCoor"],created:function(){this.$store.commit("addChildNum",{l:this.l,pkey:this.pkey,parentCoor:this.parentCoor}),this.index=this.$store.state.NumOfChilds[this.l]},data:function(){return{defaultSpace:10,index:null,ifFocus:!1,content:"",styleDefault:{width:"20",height:"6",stroke:"black",fill:"transparent","stroke-width":"1"},pathDefault:{stroke:"#000","stroke-width":"1"},textDefault:{fill:"black","text-anchor":"middle","dominant-baseline":"middle"}}},computed:{coor:function(){var t=Array.from(this.parentCoor);return t.push(this.pkey),t},l:function(){return this.level+1},filtChilds:function(){return this.data.childs.filter((function(t){return"block"==t.type}))},visible:function(){return"arrow"!=this.data.type},connectPoint:function(){return[this.startPoint[0]+this.defaultSpace,this.index*this.defaultSpace]},lastPoint:function(){var t=this.connectPoint[0]+parseInt(this.styleDefault.width),e=this.connectPoint[1]+parseFloat(this.styleDefault.height)/2;return[t,e]},styleObject:function(){return Object.assign(this.styleDefault,{fill:this.data.mainPage?"green":"transparent",x:"".concat(this.connectPoint[0]),y:"".concat(this.connectPoint[1])})},d:function(){if("0,0"!=this.startPoint){var t="".concat(this.startPoint[0],",").concat(this.startPoint[1]),e="".concat(this.connectPoint[0],",").concat(this.connectPoint[1]+parseFloat(this.styleDefault.height)/2);return"M".concat(t," L").concat(e)}return""},alldata:function(){return this.$store.state.alldata}},methods:{rectClick:function(){console.log("send changeSelf"),this.$bus.$emit("changeSelf"),this.$store.commit("changeSelf",this.data)}},destroyed:function(){this.$store.commit("reduceChildNum",this.l)}}),et=tt,nt=(n("82ac"),Object(g["a"])(et,Z,K,!1,null,"c7e46570",null)),ot=nt.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"magnifier",style:t.positionObject},[n("svg",{ref:"svg",attrs:{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight,viewBox:t.viewBox}},[n("g")]),n("v-icon",{staticClass:"mouse-icon",attrs:{name:"mouse-pointer"}})],1)},it=[],rt={props:["mouse"],data:function(){return{props:{clientHeight:null,clientWidth:null}}},watch:{},computed:{viewBox:function(){return this.mouse.length?"".concat(this.mouse[0]-10," ").concat(this.mouse[1]-10," 20 20"):"0 0 10 10"},positionObject:function(){return{height:"80px",width:"80px",left:"".concat(this.mouse[0]+50,"px"),top:"".concat(this.mouse[1]+10,"px")}}},created:function(){var t=this;window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){var t=this;this.mag=this.$refs.mag,this.$bus.$on("all:refs",(function(e){var n=t.$refs.svg.getElementsByTagName("g")[0];n.replaceWith(e)}))},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth}},beforeDestroy:function(){this.$bus.$off("all:refs")}},at=rt,ct=(n("6814"),Object(g["a"])(at,st,it,!1,null,"543ab63f",null)),lt=ct.exports,ut={components:{TreeBlock:ot,Magnifier:lt},data:function(){return{l:0,showMag:!1,mouse:[],props:{clientHeight:null,clientWidth:null,viewBox:{"min-x":0,"min-y":0,width:null,height:null,startPoint:[0,0]}},initBlockProps:{width:"20",height:"6",stroke:"black",fill:"transparent","stroke-width":"1",x:10,y:10}}},computed:{filtChilds:function(){return this.alldata.childs.filter((function(t){return"block"==t.type}))},alldata:function(){return this.$store.state.alldata},lastPoint:function(){return[this.initBlockProps.x+parseFloat(this.initBlockProps.width),this.initBlockProps.y+parseFloat(this.initBlockProps.height)/2]}},created:function(){var t=this;window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){},beforeUpdate:function(){},updated:function(){this.$bus.$emit("all:refs",this.$refs.g.cloneNode(!0))},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth,this.props.viewBox.height=this.props.clientHeight,this.props.viewBox.width=this.props.clientWidth},mousemoveEvent:function(t){this.mouse=[t.offsetX,t.offsetY]},setshowMag:function(){this.showMag=!this.showMag},rectClick:function(){console.log("send changeSelf"),this.$bus.$emit("changeSelf"),this.$store.commit("changeSelf",this.alldata)}}},pt=ut,dt=(n("429e"),Object(g["a"])(pt,J,Q,!1,null,"2b99e986",null)),ht=dt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default"},[t._v(" Demo.vue ")])},vt=[],wt={},mt=wt,bt=(n("dcf5"),Object(g["a"])(mt,ft,vt,!1,null,"6b9500e2",null)),yt=bt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default S"},t._l(t.styles,(function(t,e){return n("StyleBlock",{key:e,attrs:{layout_style:t}})})),1)},kt=[],xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default",class:[t.layout_style.name],domProps:{innerHTML:t._s(t.layout_style.content)},on:{click:t.changeStyle}})},Pt=[],Ot={props:["layout_style"],data:function(){return{}},created:function(){var t="";for(var e in this.layout_style.style){for(var n in t+=".".concat(this.layout_style.name," ").concat(e," {"),this.layout_style.style[e])t+="".concat(n,": ").concat(this.layout_style.style[e][n],";");t+="} "}var o=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");o.appendChild(s),s.type="text/css",s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))},computed:{},methods:{changeStyle:function(){console.log(),this.$bus.$emit("Style:change",this.layout_style)}}},jt=Ot,$t=(n("8510"),Object(g["a"])(jt,xt,Pt,!1,null,"1993499c",null)),Et=$t.exports,_t={components:{StyleBlock:Et},data:function(){return{styles:[{name:"default_p",content:"<div><p>put something graceful</p></div>",style:{div:{padding:"20px"},p:{"font-size":"12px"}}},{name:"default_h_p",content:"<div><h4>head</h4><p>put something meaningful</p></div>",style:{div:{padding:"10px"},h:{"font-size":"20px"},p:{"font-size":"20px"}}}]}}},It=_t,Ct=(n("e8c8"),Object(g["a"])(It,gt,kt,!1,null,"7ce2a3e0",null)),Bt=Ct.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default"},[n("b-button-group",{attrs:{size:"sm"}},[n("b-button",{on:{click:t.backclickEvent}},[n("v-icon",{attrs:{name:"chevron-left"}})],1),n("b-button",{on:{click:t.saveclickEvent}},[n("v-icon",{attrs:{name:"save"}})],1),n("b-button",{on:{click:t.undoclickEvent}},[n("v-icon",{attrs:{name:"undo"}})],1),n("b-button",{on:{click:t.redoclickEvent}},[n("v-icon",{attrs:{name:"redo"}})],1)],1)],1)},Lt=[],Dt={methods:{backclickEvent:function(){this.$bus.$emit("tool:back")},saveclickEvent:function(){this.$bus.$emit("tool:save")},undoclickEvent:function(){this.$bus.$emit("tool:undo")},redoclickEvent:function(){this.$bus.$emit("tool:redo")}}},Mt=Dt,Tt=(n("4da2"),Object(g["a"])(Mt,St,Lt,!1,null,"15fc4adb",null)),At=Tt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},ready:function(e){return t.onEditorReady(e)},change:t.onEditorChange},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})},Nt=[],Ht=(n("a753"),n("8096"),n("14e1"),n("953d")),zt={components:{quillEditor:Ht["quillEditor"]},data:function(){return{content:"",focusId:null,editorOption:{placeholder:"Select a element!",modules:{toolbar:["bold","italic","underline","strike"]}}}},created:function(){var t=this;this.$bus.$on("Block:focus",(function(e,n){t.content=e,t.focusId=n}))},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorReady:function(){},onEditorChange:function(t){var e=t.html;this.editorOption.placeholder="Type something...",this.$bus.$emit("TextEditor:change",e,this.focusId)}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){}},Xt=zt,Wt=Object(g["a"])(Xt,Ft,Nt,!1,null,null,null),Yt=Wt.exports,Rt={name:"EditFlow",components:{Main:U,All:ht,Demo:yt,Style:Bt,Tool:At,TextEditor:Yt},created:function(){this.data=this.$store.state.alldata}},Vt=Rt,qt=(n("da92"),Object(g["a"])(Vt,O,j,!1,null,null,null)),Gt=qt.exports,Ut=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Jt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("edit style modules")])])}],Qt={},Zt=Object(g["a"])(Qt,Ut,Jt,!1,null,null,null),Kt=Zt.exports;o["default"].use(P["a"]);var te=[{path:"/",name:"Home",component:Gt},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/Flow",name:"Flow",component:Gt},{path:"/EditStyle",name:"EditStyle",component:Kt}],ee=new P["a"]({mode:"history",base:"/templates/dist/",routes:te}),ne=ee;o["default"].config.productionTip=!1,new o["default"]({router:ne,store:f,render:function(t){return t(x)}}).$mount("#app")},"5c86":function(t,e,n){"use strict";var o=n("9acc"),s=n.n(o);s.a},6814:function(t,e,n){"use strict";var o=n("48fe"),s=n.n(o);s.a},6906:function(t,e,n){},"69cd":function(t,e,n){},"73d1":function(t,e,n){},"82ac":function(t,e,n){"use strict";var o=n("15e5"),s=n.n(o);s.a},8510:function(t,e,n){"use strict";var o=n("69cd"),s=n.n(o);s.a},"9acc":function(t,e,n){},"9ada":function(t,e,n){"use strict";var o=n("6906"),s=n.n(o);s.a},adae:function(t,e,n){"use strict";var o=n("b6e4"),s=n.n(o);s.a},b0a0:function(t,e,n){"use strict";var o=n("452c"),s=n.n(o);s.a},b6e4:function(t,e,n){},da92:function(t,e,n){"use strict";var o=n("f9a6"),s=n.n(o);s.a},dcf5:function(t,e,n){"use strict";var o=n("2d12"),s=n.n(o);s.a},e8c8:function(t,e,n){"use strict";var o=n("0f55"),s=n.n(o);s.a},f9a6:function(t,e,n){}});
//# sourceMappingURL=app.64e13099.js.map